<?xml version="1.0" encoding="UTF-8"?>
<svg width="1000" height="700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: bold 20px sans-serif; }
      .label { font: 12px sans-serif; }
      .small { font: 10px sans-serif; }
      .wire-power { stroke: #d32f2f; stroke-width: 3; fill: none; }
      .wire-gnd { stroke: #000; stroke-width: 3; fill: none; }
      .component { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; }
      .battery { fill: #ffe6e6; stroke: #c62828; stroke-width: 2; }
    </style>
  </defs>
  
  <text x="500" y="40" text-anchor="middle" class="title">Схема распределения питания МикРоББокс</text>
  
  <!-- Батарея -->
  <rect x="50" y="100" width="100" height="120" class="battery" rx="5"/>
  <text x="100" y="140" text-anchor="middle" class="label" font-weight="bold">LiPo 1S</text>
  <text x="100" y="160" text-anchor="middle" class="small">3.7V nominal</text>
  <text x="100" y="175" text-anchor="middle" class="small">500-1000mAh</text>
  <text x="100" y="195" text-anchor="middle" class="small" fill="#d32f2f">+ (4.2V max)</text>
  <text x="100" y="210" text-anchor="middle" class="small" fill="#000">- (GND)</text>
  
  <!-- Выключатель -->
  <rect x="180" y="130" width="60" height="50" class="component" rx="5"/>
  <text x="210" y="155" text-anchor="middle" class="small" font-weight="bold">Switch</text>
  <text x="210" y="170" text-anchor="middle" class="small">ON/OFF</text>
  <line x1="150" y1="150" x2="180" y2="150" class="wire-power"/>
  
  <!-- Защитный диод -->
  <polygon points="270,140 290,140 280,160" fill="#333"/>
  <line x1="280" y1="160" x2="280" y2="165" stroke="#333" stroke-width="2"/>
  <line x1="275" y1="165" x2="285" y2="165" stroke="#333" stroke-width="2"/>
  <text x="280" y="185" text-anchor="middle" class="small">Diode</text>
  <text x="280" y="197" text-anchor="middle" class="small">1N5819</text>
  <line x1="240" y1="150" x2="270" y2="150" class="wire-power"/>
  <line x1="290" y1="150" x2="330" y2="150" class="wire-power"/>
  
  <!-- Разветвление -->
  <circle cx="330" cy="150" r="5" fill="#d32f2f"/>
  
  <!-- Ветка 1: Buck Converter для ESP32 -->
  <line x1="330" y1="150" x2="400" y2="150" class="wire-power"/>
  <rect x="400" y="120" width="100" height="60" class="component" rx="5"/>
  <text x="450" y="145" text-anchor="middle" class="label" font-weight="bold">Buck</text>
  <text x="450" y="160" text-anchor="middle" class="small">3.7V → 5V</text>
  <text x="450" y="173" text-anchor="middle" class="small">до 3A</text>
  
  <!-- Конденсатор на входе Buck -->
  <rect x="385" y="190" width="10" height="40" fill="#fff9c4" stroke="#f57f17" stroke-width="1"/>
  <text x="395" y="240" text-anchor="middle" class="small">220µF</text>
  <line x1="390" y1="180" x2="390" y2="190" class="wire-power"/>
  <line x1="390" y1="230" x2="390" y2="250" class="wire-gnd"/>
  
  <!-- 5V выход Buck -->
  <line x1="500" y1="150" x2="580" y2="150" class="wire-power"/>
  <text x="540" y="140" class="small" fill="#d32f2f" font-weight="bold">5V</text>
  
  <!-- Конденсатор развязки ESP32 -->
  <rect x="575" y="160" width="10" height="40" fill="#fff9c4" stroke="#f57f17" stroke-width="1"/>
  <text x="580" y="215" text-anchor="middle" class="small">100µF</text>
  <line x1="580" y1="150" x2="580" y2="160" class="wire-power"/>
  <line x1="580" y1="200" x2="580" y2="220" class="wire-gnd"/>
  
  <!-- ESP32-CAM -->
  <line x1="580" y1="150" x2="650" y2="150" class="wire-power"/>
  <rect x="650" y="120" width="120" height="70" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="5"/>
  <text x="710" y="145" text-anchor="middle" class="label" font-weight="bold">ESP32-CAM</text>
  <text x="710" y="162" text-anchor="middle" class="small">5V input</text>
  <text x="710" y="177" text-anchor="middle" class="small">~300mA</text>
  <text x="710" y="190" text-anchor="middle" class="small" fill="#757575">(пик 500mA)</text>
  
  <!-- NeoPixel LEDs -->
  <line x1="580" y1="150" x2="580" y2="280" class="wire-power"/>
  <line x1="580" y1="280" x2="650" y2="280" class="wire-power"/>
  <rect x="650" y="250" width="120" height="60" fill="#fce4ec" stroke="#c2185b" stroke-width="2" rx="5"/>
  <text x="710" y="275" text-anchor="middle" class="label" font-weight="bold">NeoPixel x3</text>
  <text x="710" y="292" text-anchor="middle" class="small">5V</text>
  <text x="710" y="305" text-anchor="middle" class="small">до 180mA</text>
  
  <!-- Ветка 2: Прямое питание моторов 3.7V -->
  <line x1="330" y1="150" x2="330" y2="350" class="wire-power"/>
  <line x1="330" y1="350" x2="400" y2="350" class="wire-power"/>
  <text x="360" y="340" class="small" fill="#d32f2f" font-weight="bold">3.7V</text>
  
  <!-- Конденсатор для моторов -->
  <rect x="385" y="360" width="10" height="50" fill="#fff9c4" stroke="#f57f17" stroke-width="1"/>
  <text x="390" y="425" text-anchor="middle" class="small">220µF</text>
  <line x1="390" y1="350" x2="390" y2="360" class="wire-power"/>
  <line x1="390" y1="410" x2="390" y2="430" class="wire-gnd"/>
  
  <!-- MX1508 -->
  <rect x="450" y="320" width="100" height="80" class="component" rx="5"/>
  <text x="500" y="350" text-anchor="middle" class="label" font-weight="bold">MX1508</text>
  <text x="500" y="367" text-anchor="middle" class="small">Motor Driver</text>
  <text x="500" y="382" text-anchor="middle" class="small">VM = 3.7V</text>
  <text x="500" y="395" text-anchor="middle" class="small">до 2A пик</text>
  
  <!-- Моторы -->
  <line x1="550" y1="350" x2="620" y2="330" class="wire-power"/>
  <rect x="620" y="310" width="90" height="40" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="5"/>
  <text x="665" y="333" text-anchor="middle" class="small" font-weight="bold">Левый мотор</text>
  
  <line x1="550" y1="370" x2="620" y2="390" class="wire-power"/>
  <rect x="620" y="370" width="90" height="40" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="5"/>
  <text x="665" y="393" text-anchor="middle" class="small" font-weight="bold">Правый мотор</text>
  
  <!-- Общая земля (GND rail) -->
  <line x1="100" y1="220" x2="100" y2="500" class="wire-gnd"/>
  <line x1="100" y1="500" x2="850" y2="500" class="wire-gnd"/>
  <text x="475" y="520" text-anchor="middle" class="label" font-weight="bold">Общая земля (GND)</text>
  
  <!-- GND подключения -->
  <line x1="390" y1="250" x2="390" y2="500" class="wire-gnd"/>
  <line x1="450" y1="160" x2="450" y2="500" class="wire-gnd"/>
  <line x1="580" y1="220" x2="580" y2="500" class="wire-gnd"/>
  <line x1="710" y1="190" x2="710" y2="500" class="wire-gnd"/>
  <line x1="710" y1="310" x2="710" y2="500" class="wire-gnd"/>
  <line x1="390" y1="430" x2="390" y2="500" class="wire-gnd"/>
  <line x1="500" y1="400" x2="500" y2="500" class="wire-gnd"/>
  
  <!-- Таблица потребления -->
  <rect x="50" y="550" width="900" height="120" fill="#f5f5f5" stroke="#666" stroke-width="1" rx="5"/>
  <text x="70" y="575" class="label" font-weight="bold">Потребление тока:</text>
  
  <text x="80" y="600" class="small">• ESP32-CAM (WiFi активен): ~300mA номинально, пик до 500mA при передаче</text>
  <text x="80" y="618" class="small">• NeoPixel LED x3: до 180mA (60mA каждый на максимальной яркости белым)</text>
  <text x="80" y="636" class="small">• Моторы x2: до 2A пиковый (по 1A каждый при максимальной нагрузке)</text>
  <text x="80" y="654" class="small" font-weight="bold">• ИТОГО: до 2.5-3A при полной нагрузке (рекомендуется источник минимум 3A)</text>
  
  <text x="900" y="665" class="small" text-anchor="end" font-style="italic">МикРоББокс v1.0</text>
</svg>