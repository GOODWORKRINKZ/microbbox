#!/usr/bin/env python3
"""
–ê–Ω–∞–ª–∏–∑ –∫—ç—à-—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–º—è—Ç–∏.

–ö–õ–Æ–ß–ï–í–ê–Ø –ò–î–ï–Ø:
–í–º–µ—Å—Ç–æ 8 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ö–æ–¥–æ–≤ –ø–æ –º–∞—Å—Å–∏–≤—É, –¥–µ–ª–∞–µ–º –≤—Å—ë –∑–∞ –º–∏–Ω–∏–º—É–º –ø—Ä–æ—Ö–æ–¥–æ–≤.
–≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è ESP32 —Å –º–∞–ª–µ–Ω—å–∫–∏–º –∫—ç—à–µ–º (L1: 32KB –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π + 32KB –¥–∞–Ω–Ω—ã—Ö).
"""

# –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
LINE_CAMERA_WIDTH = 160
LINE_CAMERA_HEIGHT = 120

def analyze_original_algorithm():
    """
    –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º: 8 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ö–æ–¥–æ–≤.
    –ö–∞–∂–¥—ã–π –ø—Ä–æ—Ö–æ–¥ - —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —á—Ç–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–∞.
    """
    print("üìä –û–†–ò–ì–ò–ù–ê–õ–¨–ù–´–ô –ê–õ–ì–û–†–ò–¢–ú (8 –ø—Ä–æ—Ö–æ–¥–æ–≤)\n")
    
    # 4 –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã—Ö —Å–∫–∞–Ω–∞
    h_scans = [
        (LINE_CAMERA_HEIGHT * 25 // 100, "25%"),
        (LINE_CAMERA_HEIGHT * 50 // 100, "50%"),
        (LINE_CAMERA_HEIGHT * 75 // 100, "75%"),
        (LINE_CAMERA_HEIGHT * 90 // 100, "90%"),
    ]
    
    # 4 –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã—Ö —Å–∫–∞–Ω–∞
    v_scans = [
        (LINE_CAMERA_WIDTH * 20 // 100, "20%"),
        (LINE_CAMERA_WIDTH * 40 // 100, "40%"),
        (LINE_CAMERA_WIDTH * 60 // 100, "60%"),
        (LINE_CAMERA_WIDTH * 80 // 100, "80%"),
    ]
    
    total_memory_reads = 0
    
    # –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —Å–∫–∞–Ω—ã (–∫–∞–∂–¥–∞—è - –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ö–æ–¥)
    print("  –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —Å–∫–∞–Ω—ã:")
    for y, label in h_scans:
        reads = LINE_CAMERA_WIDTH  # –ß–∏—Ç–∞–µ–º –≤—Å—é —Å—Ç—Ä–æ–∫—É
        total_memory_reads += reads
        print(f"    –°–∫–∞–Ω –Ω–∞ Y={y:3d} ({label}): {reads:4d} –±–∞–π—Ç")
    
    # –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å–∫–∞–Ω—ã (–∫–∞–∂–¥–∞—è - –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ö–æ–¥)
    print("\n  –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å–∫–∞–Ω—ã:")
    for x, label in v_scans:
        reads = LINE_CAMERA_HEIGHT  # –ß–∏—Ç–∞–µ–º –≤–µ—Å—å —Å—Ç–æ–ª–±–µ—Ü
        total_memory_reads += reads
        print(f"    –°–∫–∞–Ω –Ω–∞ X={x:3d} ({label}): {reads:4d} –±–∞–π—Ç")
    
    # –í—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    calculations = (
        4 * 3 +  # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è 4 –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π (3 –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫–∞–∂–¥–∞—è)
        4 * 5 +  # –í—ã—á–∏—Å–ª–µ–Ω–∏–µ 4 —Ç—Ä–µ–Ω–¥–æ–≤ (5 –æ–ø–µ—Ä–∞—Ü–∏–π –∫–∞–∂–¥–∞—è)
        3 +      # –ù–∞—Ö–æ–∂–¥–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–µ–Ω–¥–∞
        2 +      # –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∏ —Ç—Ä–µ–Ω–¥–∞
        1        # –ü—Ä–æ–≤–µ—Ä–∫–∞ T-–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è
    )
    
    print(f"\n  –í—ã—á–∏—Å–ª–µ–Ω–∏—è:              {calculations:4d} –æ–ø–µ—Ä–∞—Ü–∏–π")
    print(f"\n  –ò–¢–û–ì–û —á—Ç–µ–Ω–∏–π –ø–∞–º—è—Ç–∏:     {total_memory_reads:4d} –±–∞–π—Ç")
    print(f"  –ò–¢–û–ì–û –æ–ø–µ—Ä–∞—Ü–∏–π:          {total_memory_reads + calculations:4d}")
    
    return {
        'memory_reads': total_memory_reads,
        'calculations': calculations,
        'total_ops': total_memory_reads + calculations,
        'cache_misses_estimated': 8,  # –ö–∞–∂–¥—ã–π –ø—Ä–æ—Ö–æ–¥ = –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–∞—Ö –∫—ç—à–∞
    }


def analyze_optimized_algorithm():
    """
    –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º: –æ–±—ä–µ–¥–∏–Ω—è–µ–º —Å–∫–∞–Ω—ã –¥–ª—è –∫—ç—à-—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.
    
    –°–¢–†–ê–¢–ï–ì–ò–Ø:
    - –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ: —á–∏—Ç–∞–µ–º 4 —Å—Ç—Ä–æ–∫–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (—Ö–æ—Ä–æ—à–∞—è –ª–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å)
    - –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ: —á–∏—Ç–∞–µ–º 4 —Å—Ç–æ–ª–±—Ü–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (—Ö—É–∂–µ –ª–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å, –Ω–æ –ª—É—á—à–µ —á–µ–º —Ä–∞–Ω—å—à–µ)
    """
    print("\nüöÄ –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ô –ê–õ–ì–û–†–ò–¢–ú (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—ã)\n")
    
    # 4 –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã—Ö —Å–∫–∞–Ω–∞ (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ –≤ –æ–¥–∏–Ω –±–ª–æ–∫)
    h_scans = [
        (LINE_CAMERA_HEIGHT * 25 // 100, "25%"),
        (LINE_CAMERA_HEIGHT * 50 // 100, "50%"),
        (LINE_CAMERA_HEIGHT * 75 // 100, "75%"),
        (LINE_CAMERA_HEIGHT * 90 // 100, "90%"),
    ]
    
    # 4 –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã—Ö —Å–∫–∞–Ω–∞ (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ –≤ –æ–¥–∏–Ω –±–ª–æ–∫)
    v_scans = [
        (LINE_CAMERA_WIDTH * 20 // 100, "20%"),
        (LINE_CAMERA_WIDTH * 40 // 100, "40%"),
        (LINE_CAMERA_WIDTH * 60 // 100, "60%"),
        (LINE_CAMERA_WIDTH * 80 // 100, "80%"),
    ]
    
    total_memory_reads = 0
    
    # –ë–õ–û–ö 1: –í—Å–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —Å–∫–∞–Ω—ã –≤–º–µ—Å—Ç–µ
    print("  –ë–õ–û–ö 1: –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —Å–∫–∞–Ω—ã (—á–∏—Ç–∞–µ–º 4 —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥—Ä—è–¥):")
    h_reads = 4 * LINE_CAMERA_WIDTH
    total_memory_reads += h_reads
    for y, label in h_scans:
        print(f"    –°–∫–∞–Ω –Ω–∞ Y={y:3d} ({label})")
    print(f"    –ò—Ç–æ–≥–æ —á—Ç–µ–Ω–∏–π: {h_reads:4d} –±–∞–π—Ç")
    
    # –ë–õ–û–ö 2: –í—Å–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å–∫–∞–Ω—ã –≤–º–µ—Å—Ç–µ
    print("\n  –ë–õ–û–ö 2: –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å–∫–∞–Ω—ã (—á–∏—Ç–∞–µ–º 4 —Å—Ç–æ–ª–±—Ü–∞ –ø–æ–¥—Ä—è–¥):")
    v_reads = 4 * LINE_CAMERA_HEIGHT
    total_memory_reads += v_reads
    for x, label in v_scans:
        print(f"    –°–∫–∞–Ω –Ω–∞ X={x:3d} ({label})")
    print(f"    –ò—Ç–æ–≥–æ —á—Ç–µ–Ω–∏–π: {v_reads:4d} –±–∞–π—Ç")
    
    # –í—ã—á–∏—Å–ª–µ–Ω–∏—è (—Ç–µ –∂–µ —Å–∞–º—ã–µ)
    calculations = (
        4 * 3 +  # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
        4 * 5 +  # –¢—Ä–µ–Ω–¥—ã
        3 +      # –ú–∞–∫—Å–∏–º—É–º
        2 +      # –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
        1        # T-–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ
    )
    
    print(f"\n  –í—ã—á–∏—Å–ª–µ–Ω–∏—è:              {calculations:4d} –æ–ø–µ—Ä–∞—Ü–∏–π")
    print(f"\n  –ò–¢–û–ì–û —á—Ç–µ–Ω–∏–π –ø–∞–º—è—Ç–∏:     {total_memory_reads:4d} –±–∞–π—Ç")
    print(f"  –ò–¢–û–ì–û –æ–ø–µ—Ä–∞—Ü–∏–π:          {total_memory_reads + calculations:4d}")
    
    return {
        'memory_reads': total_memory_reads,
        'calculations': calculations,
        'total_ops': total_memory_reads + calculations,
        'cache_misses_estimated': 2,  # –¢–æ–ª—å–∫–æ 2 –±–ª–æ–∫–∞ –≤–º–µ—Å—Ç–æ 8 –ø—Ä–æ—Ö–æ–¥–æ–≤
    }


def analyze_ultra_optimized_algorithm():
    """
    –£–õ–¨–¢–†–ê-–û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø: –æ–±—ä–µ–¥–∏–Ω—è–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –≤ –û–î–ò–ù –ø—Ä–æ—Ö–æ–¥!
    
    –¢–†–Æ–ö:
    –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ—Å—Ç—Ä–æ—á–Ω–æ, –Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ —Å—Ä–∞–∑—É:
    1. –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–∞ –ª–∏ —ç—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã—Ö —Å–∫–∞–Ω–æ–≤
    2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∏–∫—Å–µ–ª–∏ –Ω–∞ –Ω—É–∂–Ω—ã—Ö X-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö –¥–ª—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã—Ö —Å–∫–∞–Ω–æ–≤
    
    –†–µ–∑—É–ª—å—Ç–∞—Ç: ONE-PASS —á–µ—Ä–µ–∑ –≤–µ—Å—å –º–∞—Å—Å–∏–≤!
    """
    print("\n‚ö° –£–õ–¨–¢–†–ê-–û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ô –ê–õ–ì–û–†–ò–¢–ú (–û–î–ò–ù –ø—Ä–æ—Ö–æ–¥)\n")
    
    # –ß–∏—Ç–∞–µ–º –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑
    # –ü—Ä–∏ —ç—Ç–æ–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ, –∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å–∫–∞–Ω—ã
    total_pixels = LINE_CAMERA_WIDTH * LINE_CAMERA_HEIGHT
    
    print(f"  –û–î–ò–ù –ü–†–û–•–û–î –ø–æ –≤—Å–µ–º—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é:")
    print(f"    –ß–∏—Ç–∞–µ–º –ø–æ—Å—Ç—Ä–æ—á–Ω–æ: {LINE_CAMERA_HEIGHT} —Å—Ç—Ä–æ–∫ √ó {LINE_CAMERA_WIDTH} –ø–∏–∫—Å–µ–ª–µ–π")
    print(f"    –ò—Ç–æ–≥–æ —á—Ç–µ–Ω–∏–π: {total_pixels:5d} –±–∞–π—Ç")
    
    # –ü—Ä–∏ –∫–∞–∂–¥–æ–º —á—Ç–µ–Ω–∏–∏ –ø–∏–∫—Å–µ–ª—è:
    # - –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—Ö–æ–¥–∏—Ç –ª–∏ Y –≤ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —Å–∫–∞–Ω—ã (4 –ø—Ä–æ–≤–µ—Ä–∫–∏)
    # - –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—Ö–æ–¥–∏—Ç –ª–∏ X –≤ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å–∫–∞–Ω—ã (4 –ø—Ä–æ–≤–µ—Ä–∫–∏)
    # - –ï—Å–ª–∏ –¥–∞ - –æ–±–Ω–æ–≤–ª—è–µ–º –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä—ã
    overhead_per_pixel = 8  # 4 –ø—Ä–æ–≤–µ—Ä–∫–∏ Y + 4 –ø—Ä–æ–≤–µ—Ä–∫–∏ X
    total_checks = total_pixels * overhead_per_pixel
    
    # –í—ã—á–∏—Å–ª–µ–Ω–∏—è (—Ç–µ –∂–µ —Å–∞–º—ã–µ)
    calculations = (
        4 * 3 +  # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
        4 * 5 +  # –¢—Ä–µ–Ω–¥—ã
        3 +      # –ú–∞–∫—Å–∏–º—É–º
        2 +      # –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
        1        # T-–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ
    )
    
    print(f"\n  –ü—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ª–æ–≤–∏–π:        {total_checks:5d} –æ–ø–µ—Ä–∞—Ü–∏–π (8 –Ω–∞ –ø–∏–∫—Å–µ–ª—å)")
    print(f"  –í—ã—á–∏—Å–ª–µ–Ω–∏—è:              {calculations:4d} –æ–ø–µ—Ä–∞—Ü–∏–π")
    print(f"\n  –ò–¢–û–ì–û —á—Ç–µ–Ω–∏–π –ø–∞–º—è—Ç–∏:     {total_pixels:5d} –±–∞–π—Ç")
    print(f"  –ò–¢–û–ì–û –æ–ø–µ—Ä–∞—Ü–∏–π:          {total_pixels + total_checks + calculations:5d}")
    
    return {
        'memory_reads': total_pixels,
        'calculations': calculations + total_checks,
        'total_ops': total_pixels + total_checks + calculations,
        'cache_misses_estimated': 1,  # –ò–¥–µ–∞–ª—å–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å!
    }


def print_comparison(original, optimized, ultra):
    """–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–¥—Ö–æ–¥–æ–≤."""
    print("\n" + "="*80)
    print("‚ö° –°–†–ê–í–ù–ï–ù–ò–ï –ü–û–î–•–û–î–û–í –ö –°–ö–ê–ù–ò–†–û–í–ê–ù–ò–Æ")
    print("="*80)
    
    print(f"\n{'–ú–µ—Ç—Ä–∏–∫–∞':<40} {'–û—Ä–∏–≥–∏–Ω–∞–ª':>12} {'–û–ø—Ç–∏–º–∏–∑–∏—Ä.':>12} {'–£–ª—å—Ç—Ä–∞':>12}")
    print("-" * 80)
    
    print(f"{'–ß—Ç–µ–Ω–∏–π –ø–∞–º—è—Ç–∏ (–±–∞–π—Ç):':<40} {original['memory_reads']:>12,} {optimized['memory_reads']:>12,} {ultra['memory_reads']:>12,}")
    print(f"{'–í—ã—á–∏—Å–ª–µ–Ω–∏–π:':<40} {original['calculations']:>12,} {optimized['calculations']:>12,} {ultra['calculations']:>12,}")
    print(f"{'–í–°–ï–ì–û –æ–ø–µ—Ä–∞—Ü–∏–π:':<40} {original['total_ops']:>12,} {optimized['total_ops']:>12,} {ultra['total_ops']:>12,}")
    print(f"{'–ü—Ä–æ–º–∞—Ö–æ–≤ –∫—ç—à–∞ (–æ—Ü–µ–Ω–∫–∞):':<40} {original['cache_misses_estimated']:>12} {optimized['cache_misses_estimated']:>12} {ultra['cache_misses_estimated']:>12}")
    
    print("\n" + "-" * 80)
    print("–í–´–í–û–î–´:\n")
    
    # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º
    opt_speedup = original['total_ops'] / optimized['total_ops']
    ultra_speedup = original['total_ops'] / ultra['total_ops']
    
    print(f"  üìä –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π vs –û—Ä–∏–≥–∏–Ω–∞–ª:")
    print(f"     - –û–ø–µ—Ä–∞—Ü–∏–π: {opt_speedup:.2f}x –º–µ–Ω—å—à–µ")
    print(f"     - –ü—Ä–æ–º–∞—Ö–æ–≤ –∫—ç—à–∞: {original['cache_misses_estimated'] / optimized['cache_misses_estimated']:.0f}x –º–µ–Ω—å—à–µ")
    
    print(f"\n  ‚ö° –£–ª—å—Ç—Ä–∞-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π vs –û—Ä–∏–≥–∏–Ω–∞–ª:")
    print(f"     - –û–ø–µ—Ä–∞—Ü–∏–π: {ultra_speedup:.2f}x –º–µ–Ω—å—à–µ")
    print(f"     - –ü—Ä–æ–º–∞—Ö–æ–≤ –∫—ç—à–∞: {original['cache_misses_estimated'] / ultra['cache_misses_estimated']:.0f}x –º–µ–Ω—å—à–µ")
    
    print(f"\n  ü§î –£–ª—å—Ç—Ä–∞ vs –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π:")
    ultra_vs_opt = optimized['total_ops'] / ultra['total_ops']
    print(f"     - –û–ø–µ—Ä–∞—Ü–∏–π: {ultra_vs_opt:.2f}x {'–º–µ–Ω—å—à–µ' if ultra_vs_opt > 1 else '–ë–û–õ–¨–®–ï'}")
    print(f"     - –ü—Ä–æ–º–∞—Ö–æ–≤ –∫—ç—à–∞: {optimized['cache_misses_estimated'] / ultra['cache_misses_estimated']:.0f}x –º–µ–Ω—å—à–µ")
    
    # –í–µ—Ä–¥–∏–∫—Ç
    print("\n" + "="*80)
    print("‚úÖ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:\n")
    
    if ultra_vs_opt < 1:
        print("  ‚ùå –£–ª—å—Ç—Ä–∞-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ù–ï –≤—ã–≥–æ–¥–Ω–∞!")
        print("     –ü—Ä–∏—á–∏–Ω–∞: —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø—Ä–æ–≤–µ—Ä–æ–∫ —É—Å–ª–æ–≤–∏–π –Ω–∞ –∫–∞–∂–¥—ã–π –ø–∏–∫—Å–µ–ª—å")
        print(f"     ({ultra['calculations']:,} –ø—Ä–æ–≤–µ—Ä–æ–∫ vs {optimized['calculations']:,})")
        print("\n  ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ô –ø–æ–¥—Ö–æ–¥ (2 –±–ª–æ–∫–∞ —Å–∫–∞–Ω–æ–≤)")
    else:
        print("  ‚úÖ –£–ª—å—Ç—Ä–∞-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—ã–≥–æ–¥–Ω–∞!")
        print(f"     –í—ã–∏–≥—Ä—ã—à: {ultra_vs_opt:.2f}x —É—Å–∫–æ—Ä–µ–Ω–∏–µ + –∏–¥–µ–∞–ª—å–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å")
        print("\n  ‚ö° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –£–õ–¨–¢–†–ê-–û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ô –ø–æ–¥—Ö–æ–¥ (–æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥)")
    
    print("="*80)


def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è."""
    print("\n" + "="*80)
    print("üîç –ê–ù–ê–õ–ò–ó –ö–≠–®-–≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–ò –ê–õ–ì–û–†–ò–¢–ú–ê –°–ö–ê–ù–ò–†–û–í–ê–ù–ò–Ø")
    print("="*80)
    print(f"\n–†–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: {LINE_CAMERA_WIDTH}√ó{LINE_CAMERA_HEIGHT} = {LINE_CAMERA_WIDTH * LINE_CAMERA_HEIGHT:,} –±–∞–π—Ç\n")
    
    original = analyze_original_algorithm()
    optimized = analyze_optimized_algorithm()
    ultra = analyze_ultra_optimized_algorithm()
    
    print_comparison(original, optimized, ultra)
    
    return 0


if __name__ == '__main__':
    exit(main())
